<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ³ - Ù…Ø¯Ø±Ø³Ø© Ø³Ø¹ÙŠØ¯ Ø¨Ù† Ø§Ù„Ù…Ø³ÙŠØ¨</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary-color: #5d8aa8; --header-bg: #2c3e50; --secondary-color: #f4f7f9; }
        body { 
            font-family: 'Vazirmatn', sans-serif; 
            background-color: var(--secondary-color); 
            margin: 0; padding: 10px; 
            display: flex; flex-direction: column; align-items: center; 
        }
        
        .header {
            text-align: center; background: var(--header-bg); color: white;
            padding: 15px 10px; border-radius: 12px; width: 100%; max-width: 600px;
            margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .header h1 { margin: 0; font-size: 19px; }
        .header h2 { margin: 5px 0 8px 0; font-size: 15px; font-weight: normal; color: #ced4da; }
        
        .school-title { font-size: 13px; margin-bottom: 5px; opacity: 0.9; }

        .test-note { 
            font-size: 14px; background: rgba(255,255,255,0.1); padding: 10px; 
            border-radius: 5px; margin-top: 10px; color: #ffeb3b; 
            font-weight: bold; border: 1px dashed rgba(255,235,59,0.3); line-height: 1.4;
        }

        .staff-info {
            display: flex; justify-content: center; gap: 6px;
            font-size: 10px; border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 8px; white-space: nowrap;
        }

        .quiz-container { 
            background: white; padding: 25px; border-radius: 15px; 
            width: 100%; max-width: 600px; text-align: center; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); 
        }
        .progress-bar { height: 6px; background: #eee; border-radius: 3px; margin-bottom: 15px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary-color); width: 0%; transition: 0.3s; }
        .question-text { font-size: 20px; font-weight: bold; margin-bottom: 25px; color: #34495e; line-height: 1.6; }
        
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .option-btn { 
            padding: 15px; font-size: 17px; border: 2px solid #ecf0f1; 
            border-radius: 10px; background: white; cursor: pointer; 
            font-family: 'Vazirmatn', sans-serif; transition: 0.2s; 
        }
        .option-btn:active { background: #f8f9fa; transform: scale(0.98); }
        
        #results { display: none; }
        .score-display { font-size: 48px; font-weight: bold; color: var(--primary-color); margin: 10px 0; }
        
        /* ØªØµÙ…ÙŠÙ… Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© */
        .retry-btn {
            background-color: #5d8aa8; color: white; border: none;
            padding: 10px 20px; border-radius: 8px; font-size: 16px;
            cursor: pointer; font-family: 'Vazirmatn'; margin-top: 15px;
            display: inline-flex; align-items: center; gap: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: 0.3s;
        }
        .retry-btn:hover { background-color: #4a708b; }
        
        .loading { border: 3px solid #f3f3f3; border-top: 3px solid var(--primary-color); border-radius: 50%; width: 25px; height: 25px; animation: spin 1s linear infinite; margin: 15px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        @media (max-width: 450px) { .options-grid { grid-template-columns: 1fr; } .header h1 { font-size: 17px; } }
    </style>
</head>
<body>

<div class="header">
    <h1>ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø§ÙØ³</h1>
    <h2>Ù…Ø¬Ø§Ù„ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h2>
    <div class="school-title">Ù…Ø¯Ø±Ø³Ø© Ø³Ø¹ÙŠØ¯ Ø¨Ù† Ø§Ù„Ù…Ø³ÙŠØ¨ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ© Ø¨Ø£Ø¨Ù‡Ø§</div>
    <div class="staff-info">
        <span>Ù…Ø¹Ù„Ù… Ø§Ù„Ù…Ø§Ø¯Ø© / Ø£. Ø¹Ù…Ø±Ùˆ Ø§Ù„Ø¹Ù…Ø±ÙŠ</span>
        <span>|</span>
        <span>Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© / Ø£. Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ù†Ù‚Ø§Ø²</span>
    </div>
    <div class="test-note">Ù…Ù„Ø§Ø­Ø¸Ø© : Ù‡Ø°Ø§ Ø§Ø®ØªØ¨Ø§Ø± ØªØ¯Ø±ÙŠØ¨ÙŠ Ù„Ø§ÙŠÙˆØ¬Ø¯ Ø¹Ù„ÙŠÙ‡Ø§ Ù†Ø¬Ø§Ø­ Ø£Ùˆ Ø±Ø³ÙˆØ¨</div>
</div>

<div class="quiz-container" id="quiz-box">
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    <div id="q-counter" style="font-size:11px; color:#999; margin-bottom:10px;">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 15</div>
    <div class="question-text" id="question-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    <div class="options-grid" id="options-grid"></div>
</div>

<div class="quiz-container" id="results">
    <h2 style="color:var(--primary-color); font-size: 20px;">Ø£Ø­Ø³Ù†Øª ÙŠØ§ Ø¨Ø·Ù„! Ù„Ù‚Ø¯ Ø§Ù†ØªÙ‡ÙŠØª.</h2>
    <p style="font-size: 14px; margin-bottom: 5px;">Ø¯Ø±Ø¬ØªÙƒ Ù‡ÙŠ:</p>
    <div class="score-display" id="final-score">0</div>
    <p style="font-size: 13px; color: #666;">Ø§Ø³ØªØ¹Ø¯ Ù„Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ù‚Ø§Ø¯Ù… ÙÙŠ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª.</p>
    
    <div id="retry-section" style="display:none;">
        <button class="retry-btn" onclick="location.reload()">
            <span>Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</span> ğŸ”„
        </button>
        <p style="font-size: 11px; color: #999; margin-top: 8px;">(Ù„Ø¯ÙŠÙƒ Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ù…ØªØ¨Ù‚ÙŠØ©)</p>
    </div>

    <div id="status-area" style="margin-top:15px;"><div class="loading"></div></div>
</div>

<script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbw6CKxpc877UM7wQmDIVLlOR_aNiHDE19z-RP0PBPMPCszB72Ilb6_ArWMhrbP_mU3i/exec';

    const quizData = [
        { q: "Ù…Ø§ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© Ù„Ù„Ø±Ù‚Ù… (5) ÙÙŠ Ø§Ù„Ø¹Ø¯Ø¯ 2534ØŸ", a: ["5", "50", "500", "5000"], c: 2 },
        { q: "Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ© Ù„Ù„Ø¹Ø¯Ø¯ 'Ø«Ù„Ø§Ø«Ø© Ø¢Ù„Ø§Ù ÙˆØ®Ù…Ø³ Ù…Ø¦Ø© ÙˆØ£Ø±Ø¨Ø¹Ø©' Ù‡ÙŠ:", a: ["3540", "3054", "3504", "5340"], c: 2 },
        { q: "Ø£ÙŠ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ§Ù„ÙŠØ© ÙŠÙƒÙ…Ù„ Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù‚ÙØ²ÙŠ: 2400ØŒ 2600ØŒ 2800ØŒ ... ØŸ", a: ["2900", "3000", "2850", "3200"], c: 1 },
        { q: "Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ø£Ø¹Ø¯Ø§Ø¯ (1250ØŒ 1520ØŒ 1052) Ù…Ù† Ø§Ù„Ø£ØµØºØ± Ø¥Ù„Ù‰ Ø§Ù„Ø£ÙƒØ¨Ø± Ù‡Ùˆ:", a: ["1520ØŒ 1250ØŒ 1052", "1052ØŒ 1520ØŒ 1250", "1250ØŒ 1052ØŒ 1520", "1052ØŒ 1250ØŒ 1520"], c: 3 },
        { q: "Ø£ÙƒÙ„ Ù…Ø­Ù…Ø¯ 3 Ù‚Ø·Ø¹ Ù…Ù† ÙØ·ÙŠØ±Ø© Ù…Ù‚Ø³Ù…Ø© Ø¥Ù„Ù‰ 8 Ù‚Ø·Ø¹ Ù…ØªØ³Ø§ÙˆÙŠØ©. Ù…Ø§ Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ø°ÙŠ ÙŠÙ…Ø«Ù„ Ù…Ø§ Ø£ÙƒÙ„Ù‡ØŸ", a: ["3/8", "5/8", "8/3", "3/5"], c: 0 },
        { q: "ÙƒÙŠÙ ÙŠÙƒØªØ¨ Ø§Ù„ÙƒØ³Ø± 'Ø®Ù…Ø³Ø© Ø£Ø³Ø¨Ø§Ø¹'ØŸ", a: ["7/5", "5/7", "1/7", "5/5"], c: 1 },
        { q: "Ø£ÙŠ Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„ØªØ§Ù„ÙŠØ© ØµØ­ÙŠØ­Ø©ØŸ", a: ["1/2 > 1/4", "1/4 > 1/2", "1/3 = 1/5", "1/8 > 1/3"], c: 0 },
        { q: "Ù…Ø§ Ø§Ù„ÙƒØ³Ø± Ø§Ù„Ù…ÙƒØ§ÙØ¦ Ù„Ù„ÙƒØ³Ø± 1/2ØŸ", a: ["1/3", "2/4", "2/3", "3/5"], c: 1 },
        { q: "Ù†Ø§ØªØ¬ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¬Ù…Ø¹: 345 + 213 = ...", a: ["558", "568", "557", "658"], c: 0 },
        { q: "ØªÙ‚Ø¯ÙŠØ± Ù†Ø§ØªØ¬ 49 + 32 Ø¨Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ Ø¥Ù„Ù‰ Ø£Ù‚Ø±Ø¨ Ø¹Ø´Ø±Ø© Ù‡Ùˆ:", a: ["70", "80", "90", "100"], c: 1 },
        { q: "Ù…Ø¹ Ø£Ø­Ù…Ø¯ 500 Ø±ÙŠØ§Ù„ØŒ Ø§Ø´ØªØ±Ù‰ Ù„Ø¹Ø¨Ø© Ø¨Ù…Ø¨Ù„Øº 200 Ø±ÙŠØ§Ù„. ÙƒÙ… Ø±ÙŠØ§Ù„Ø§Ù‹ ØªØ¨Ù‚Ù‰ Ù…Ø¹Ù‡ØŸ", a: ["200 Ø±ÙŠØ§Ù„", "300 Ø±ÙŠØ§Ù„", "700 Ø±ÙŠØ§Ù„", "500 Ø±ÙŠØ§Ù„"], c: 1 },
        { q: "Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ØªÙŠ ØªÙ…Ø«Ù„ Ø§Ù„Ø¬Ù…Ø¹ Ø§Ù„Ù…ØªÙƒØ±Ø± (4 + 4 + 4) Ù‡ÙŠ:", a: ["4 Ã— 4", "3 Ã— 4", "4 + 3", "12 Ã— 1"], c: 1 },
        { q: "ÙˆØ²Ø¹Øª Ø£Ù… 12 Ù‚Ø·Ø¹Ø© Ø­Ù„ÙˆÙ‰ Ø¨Ø§Ù„ØªØ³Ø§ÙˆÙŠ Ø¹Ù„Ù‰ 3 Ø£Ø·ÙØ§Ù„. ÙƒÙ… Ù†ØµÙŠØ¨ ÙƒÙ„ Ø·ÙÙ„ØŸ", a: ["3 Ù‚Ø·Ø¹", "4 Ù‚Ø·Ø¹", "6 Ù‚Ø·Ø¹", "9 Ù‚Ø·Ø¹"], c: 1 },
        { q: "Ù†Ø§ØªØ¬ 7 Ã— 8 = ...", a: ["54", "56", "48", "64"], c: 1 },
        { q: "Ø§Ø´ØªØ±Ù‰ Ø®Ø§Ù„Ø¯ 5 Ø£Ù‚Ù„Ø§Ù… Ø¨Ø³Ø¹Ø± 4 Ø±ÙŠØ§Ù„Ø§Øª Ù„Ù„Ù‚Ù„Ù… Ø§Ù„ÙˆØ§Ø­Ø¯. ÙƒÙ… Ø¯ÙØ¹ Ù„Ù„Ø¨Ø§Ø¦Ø¹ØŸ", a: ["9 Ø±ÙŠØ§Ù„Ø§Øª", "20 Ø±ÙŠØ§Ù„Ø§Ù‹", "1 Ø±ÙŠØ§Ù„", "25 Ø±ÙŠØ§Ù„Ø§Ù‹"], c: 1 }
    ];

    let currentIdx = 0, score = 0, qStats = [];
    let attempts = parseInt(localStorage.getItem('nafis_v9_attempts')) || 0;

    if(attempts >= 2) {
        document.body.innerHTML = "<div class='quiz-container' style='margin-top:50px;'><h3>Ø¹Ø°Ø±Ø§Ù‹ ÙŠØ§ Ø¨Ø·Ù„!</h3><p>Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ¯Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ùƒ.</p></div>";
    }

    function loadQuestion() {
        const q = quizData[currentIdx];
        document.getElementById("q-counter").innerText = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentIdx + 1} Ù…Ù† 15`;
        document.getElementById("progress-fill").style.width = `${((currentIdx + 1) / 15) * 100}%`;
        document.getElementById("question-text").innerText = q.q;
        const grid = document.getElementById("options-grid");
        grid.innerHTML = "";
        
        q.a.forEach((opt, i) => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => {
                let isCorrect = (i === q.c) ? 1 : 0;
                if(isCorrect) score++;
                qStats.push(isCorrect);
                currentIdx++;
                if(currentIdx < quizData.length) loadQuestion();
                else submitData();
            };
            grid.appendChild(btn);
        });
    }

    function submitData() {
        document.getElementById('quiz-box').style.display = 'none';
        document.getElementById('results').style.display = 'block';
        document.getElementById('final-score').innerText = score + " / 15";
        
        attempts++;
        localStorage.setItem('nafis_v9_attempts', attempts);

        // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø¥Ø¹Ø§Ø¯Ø© ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
        if (attempts < 2) {
            document.getElementById('retry-section').style.display = 'block';
        }

        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({ score: score, qStats: qStats, attempt: attempts })
        }).then(() => {
            document.getElementById('status-area').innerHTML = "<p style='color:green; font-weight:bold; font-size:11px;'>âœ“ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„ Ø¨Ù†Ø¬Ø§Ø­</p>";
        }).catch(() => {
            document.getElementById('status-area').innerHTML = "";
        });
    }
    loadQuestion();
</script>
</body>
</html>
